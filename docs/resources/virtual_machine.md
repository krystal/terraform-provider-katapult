---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "katapult_virtual_machine Resource - terraform-provider-katapult"
subcategory: ""
description: |-
  
---

# katapult_virtual_machine (Resource)



## Example Usage

```terraform
# Minimal
resource "katapult_ip" "web-1" {}

resource "katapult_virtual_machine" "web-1" {
  package       = "rock-3"
  disk_template = "templates/ubuntu-20-04"
  disk_template_options = {
    install_agent = true # required by some disk templates
  }
  ip_address_ids = [katapult_ip.web-1.id]
}

# Extensive
resource "katapult_ip" "web-2" {}
resource "katapult_ip" "web-2-internal" {}

resource "katapult_virtual_machine_group" "web" {
  name = "web-servers"
}

resource "katapult_virtual_machine" "base" {
  name        = "Web 2"
  hostname    = "web-2"
  description = "A web server."

  group_id = katapult_virtual_machine_group.web.id
  tags     = ["web", "public"]

  package       = "rock-3"
  disk_template = "templates/ubuntu-20-04"
  disk_template_options = {
    install_agent = true
  }

  # First defined disk becomes the boot disk that the OS is installed on.
  disk {
    name = "System Disk" # Optional
    size = 20            # GB
  }

  disk {
    name = "Data" # Optional
    size = 100    # GB
  }

  ip_address_ids = [
    katapult_ip.web-2.id,
    katapult_ip.web-2-internal.id
  ]

  # Use katapult_network_speed_profiles data source to get list of available
  # profiles.
  network_speed_profile = "1gbps"
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `disk_template` (String) Permalink or ID of a Disk Template.
- `ip_address_ids` (Set of String) One or more IP IDs.
- `package` (String) Permalink or ID of a Virtual Machine Package.

### Optional

- `description` (String)
- `disk` (Block List) Specify one or more disks with custom sizes to create and attach to the Virtual Machine during creation. First defined disk will be used as the boot disk. If no disks are defined, a single disk will be created based on the chosen package. (see [below for nested schema](#nestedblock--disk))
- `disk_template_options` (Map of String)
- `group_id` (String)
- `hostname` (String)
- `name` (String)
- `network_speed_profile` (String) Permalink of a Network Speed Profile.
- `tags` (Set of String)
- `timeouts` (Block, Optional) (see [below for nested schema](#nestedblock--timeouts))

### Read-Only

- `fqdn` (String)
- `id` (String) The ID of this resource.
- `ip_addresses` (Set of String)
- `state` (String)

<a id="nestedblock--disk"></a>
### Nested Schema for `disk`

Required:

- `size` (Number) Size of the disk in GB.

Optional:

- `name` (String) Name of the disk.


<a id="nestedblock--timeouts"></a>
### Nested Schema for `timeouts`

Optional:

- `create` (String)
- `delete` (String)
- `update` (String)


